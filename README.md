# GO_Reverse_Proxy · 多路由反向代理服务

基于 Go 标准库实现的轻量级反向代理工具，无需任何第三方依赖，编译后即为 单一可执行文件（EXE），可直接在 Windows / Linux / macOS 上运行。

支持 多路由规则、路径前缀匹配、正则路由匹配、泛型反向代理、配置自动重载、实时状态监控 等能力，适合作为本地开发代理、局域网打印机代理、后端多服务聚合网关等场景。

## 特性亮点

- 🚀 单文件运行 - 无需安装环境或外部依赖，编译后即可运行。
- ⚡ 配置自动生效 - 修改 proxy.ini 可立即生效，无需手动重启进程。
- 🔄 多路由反向代理 - 支支持多个不同路径前缀转发到不同目标服务
- 🎯 三种路由匹配方式
  - Prefix 前缀匹配：如 /api
  - Regex 正则匹配：如 ^/v[0-9]/.*$
  - Generic 泛型代理：任意路径完整转发、不裁切 URL
- 📊 内置状态监控 - 通过 /status 接口实时查看服务状态、路由规则、请求统计等。
- 🛡️ 错误处理 - 所有错误均提供稳定的 JSON 输出格式，便于排查。
- 🖥️ 控制台美化 - 启动时自动打印横幅信息，路由清晰、端口信息明了。
- 
## 快速开始

### 只需首次初始化 Go 模块：

```bash
go mod init proxy
```

### 直接运行

```bash
go run main.go
```
首次运行若未找到 proxy.ini，程序会自动创建并提示输入：

后端目标地址（如 http://192.168.0.102:80）

本地监听端口（如 4166）

随后生成初始配置文件 proxy.ini。

### 编译为独立可执行文件

Windows

```bash
go build -ldflags "-s -w" -o RevProxy_1.0.0.exe
```

Linux / Mac：

```bash
go build -ldflags "-s -w" -o revproxy
```

生成图标资源文件（可选）
icon 转换工具：https://d1tools.com/tools/ico-generator/

```bash
rsrc -ico icon.ico -arch amd64 -o rsrc.syso
```

## 配置文件格式（proxy.ini）

- 第一处出现的端口号（纯数字）将被识别为监听端口（位置不限）
- 每个路由行格式：
- 路径规则  后端地址  匹配类型
- 支持三种匹配方式：
  1. prefix  - 前缀匹配（路径以此开头即匹配，默认，可不写）
  2. regex   - 正则匹配（可匹配复杂路径规则）
  3. generic - 泛型代理（兜底匹配，匹配所有未匹配路径）
- 空行或以 # 开头的内容将被忽略

```ini
# 监听端口
4288

# 路由配置
/api           127.0.0.1:3000
/MFP62         192.168.0.100
^/v[0-9]/.*$   127.0.0.1:3001 regex
/printer       192.168.0.101 generic
```

支持以下扩展写法

```ini
/api         http://127.0.0.1:3000             # 前缀匹配
^/v[0-9]/.*$ http://127.0.0.1:3001     regex   # 正则匹配
*            http://192.168.0.100      generic # 泛型代理（兜底）
```

> ⚡ 注意：
> 
> 匹配优先级：regex > prefix > generic
> 
> 路径规则支持 /api、^/v[0-9]/.*$、* 等形式
> 
> generic 只能有一个，作为所有未匹配请求的默认代理
